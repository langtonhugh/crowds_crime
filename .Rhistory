install.packages(c("crimedata", "pdftools", "rnaturalearth"))
library(crimedata) # crime data
library(nflscrapR) # NFL data
library(janitor) # for cleaning
library(dplyr) # for wrangling
library(stringr) # for wrangling
library(tidyr) # for wrangling
library(sf)
library(lubridate)
library(rnaturalearth)
library(ggplot2)
library(here)
nfl_attend <- read.csv(here("data", "stadium_attendance_data/nfl_2018.csv"))
here("data", "stadium_attendance_data/nfl_2018.csv")
nfl_attend <- read.csv(here("data", "nfl_2018.csv"))
nfl_coords <- read_csv("https://raw.githubusercontent.com/Sinbad311/CloudProject/master/NFL%20Stadium%20Latitude%20and%20Longtitude.csv")
nfl_coords <- read_csv("https://raw.githubusercontent.com/Sinbad311/CloudProject/master/NFL%20Stadium%20Latitude%20and%20Longtitude.csv")
library(readr)         # loading
nfl_coords <- read_csv("https://raw.githubusercontent.com/Sinbad311/CloudProject/master/NFL%20Stadium%20Latitude%20and%20Longtitude.csv")
nfl_coords <- nfl_coords %>%
clean_names() %>%
mutate(team = if_else(team == "Forty-Niners", "49ers", as.character(team)))
class(nfl_coords$team)
nfl_coords <- nfl_coords %>%
clean_names() %>%
mutate(team = if_else(team == "Forty-Niners", "49ers", team))
# NFL coords
nfl_coords <- read_csv("https://raw.githubusercontent.com/Sinbad311/CloudProject/master/NFL%20Stadium%20Latitude%20and%20Longtitude.csv")
# NFL attendance
nfl_attend <- read_csv(here("data", "nfl_2018.csv"))
nfl_coords <- nfl_coords %>%
clean_names() %>%
mutate(team = if_else(team == "Forty-Niners", "49ers", team))
nfl_attend <- nfl_attend %>%
clean_names() %>%
rowwise() %>%
mutate(team = last(str_split(tm, " ")[[1]])) %>%
left_join(., nfl_coords, by = c('team' = 'team')) %>%
filter(!is.na(conference))
